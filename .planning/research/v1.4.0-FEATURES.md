# Feature Landscape: FlowForge v1.4.0

**Domain:** Desktop Git client -- navigation, testing, API integration
**Researched:** 2026-02-08

## Table Stakes

Features that are expected given the milestone's scope. Missing = milestone feels incomplete.

| Feature | Why Expected | Complexity | Notes |
|---------|--------------|------------|-------|
| Navigation FSM with transition guards | Core promise of the milestone. Without guards, XState adds complexity without value. | High | Must prevent invalid states: e.g., pushing diff blade when no repo is open |
| Vitest running with React component tests | Test infra without at least one component test is just config, not infrastructure. | Medium | Need Tauri IPC mock pattern established |
| Gitignore template list in Init Repo blade | The Init Repo blade without .gitignore selection is a step backward from `git init` CLI. | Medium | GitHub API returns ~150 templates; needs search/filter UI |
| Gitignore template preview | Users need to see what a template contains before applying it. | Low | Render template `source` field in a code block |
| Test coverage reporting | CI should report coverage from day one to establish baseline. | Low | @vitest/coverage-v8, add to CI workflow |

## Differentiators

Features that go beyond expectations and add real value.

| Feature | Value Proposition | Complexity | Notes |
|---------|-------------------|------------|-------|
| XState devtools integration | Visual debugging of navigation state in dev mode. Stately Studio inspector shows live state chart. | Low | `inspect: true` option on `createActor()` in dev mode |
| Gitignore template composition | Combine multiple templates (e.g., Node + macOS + JetBrains). Most tools only allow one. | Medium | Concatenate `source` fields with deduplication |
| Conventional Commit blade with type inference | Auto-suggest commit type based on staged files (already have `suggest_commit_type` Rust command). | Medium | Existing Rust infra, needs UI |
| Conventional Commit scope autocomplete | Auto-complete scopes from commit history (already have `get_scope_suggestions` Rust command). | Low | Existing Rust infra, needs UI wiring |
| Offline gitignore fallback | Bundle top 20 most common templates for when GitHub is unreachable. | Low | Static JSON, ~5KB |
| Navigation history (back/forward) | Browser-like back/forward in blade stack. XState makes this trivial with history states. | Medium | XState `history` pseudo-state |

## Anti-Features

Features to explicitly NOT build in this milestone.

| Anti-Feature | Why Avoid | What to Do Instead |
|--------------|-----------|-------------------|
| Full e2e test suite | Tauri e2e requires `tauri-driver` or Playwright with special setup. Heavy investment for a test foundation milestone. | Start with unit + component tests. Plan e2e for a dedicated testing milestone. |
| XState for ALL state management | Replacing 21 Zustand stores with XState would be a massive rewrite with no user-facing benefit. | XState for navigation FSM only. Zustand for simple state. |
| Custom .gitignore editor | A full editor with syntax highlighting, validation, etc. is a feature project, not a milestone item. | Show template preview in read-only code block. Allow combining templates. Manual editing is already available in the repo browser blade. |
| GitHub authentication for higher rate limits | 60 req/hour unauthenticated is plenty for listing templates. Auth adds OAuth complexity. | Cache template list aggressively (React Query `staleTime: Infinity`). Fetch individual templates on demand. |
| Snapshot testing | Brittle for UI components that change frequently. Creates maintenance burden without catching real bugs. | Use behavior-based Testing Library tests: "does the button appear?", "does clicking it call the handler?" |
| Visual regression testing | Requires image comparison tooling, baseline management, CI screenshot capabilities. | Defer to dedicated testing milestone. Focus on logic and behavior tests. |

## Feature Dependencies

```
Test Infrastructure --> XState Navigation FSM (tests validate FSM transitions)
XState Navigation FSM --> Init Repo Blade (new blade type in FSM)
XState Navigation FSM --> Conventional Commit Blade (new blade type in FSM)
Init Repo Blade --> Gitignore Template Integration (UI for template selection)
Zustand Store Consolidation --> Conventional Commit Blade (cleaner state surface)
reqwest Cargo addition --> Gitignore Template Integration (Rust HTTP client)
```

## MVP Recommendation

Prioritize:
1. **Test infrastructure** with Vitest config, setup file, Tauri mock factory, and 3-5 example tests covering: a pure utility function, a Zustand store, a React component, and an XState machine
2. **XState navigation FSM** replacing `useBladeStore` with formal state machine, maintaining backward-compatible behavior for all 13 existing blade types
3. **Init Repo blade with gitignore templates** using cached GitHub API, search/filter, and template preview

Defer:
- **Conventional Commit blade:** Depends on store consolidation for clean implementation. The existing staging blade's commit form works; a dedicated blade is an enhancement.
- **Full Zustand consolidation:** Important tech debt but not user-facing. Can happen incrementally alongside other work.
- **Gitignore composition:** Nice differentiator but adds complexity to Init Repo blade. Ship single-template selection first, add composition later.

## Sources

- [GitHub Gitignore API](https://docs.github.com/en/rest/gitignore/gitignore) -- template list endpoint
- [XState Stately Studio](https://stately.ai/docs/stately-studio) -- visual devtools
- [XState history states](https://stately.ai/docs/history-states) -- back/forward navigation pattern
- Current codebase analysis: `useBladeStore`, `useBladeNavigation`, `bladeOpener`, `bladeTypes.ts`
