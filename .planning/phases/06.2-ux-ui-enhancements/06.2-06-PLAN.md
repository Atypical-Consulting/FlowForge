---
phase: 06.2-ux-ui-enhancements
plan: 06
type: execute
wave: 3
depends_on: ["06.2-02", "06.2-04"]
files_modified:
  - src/App.tsx
  - src/components/Header.tsx
  - src/components/RepositoryView.tsx
  - src/components/staging/StagingPanel.tsx
  - src/components/commit/CommitHistory.tsx
  - src/index.css
autonomous: true

must_haves:
  truths:
    - "App background uses Catppuccin base/mantle colors"
    - "Header uses Catppuccin colors with backdrop blur effect"
    - "All sidebar sections use Catppuccin surface colors"
  artifacts:
    - path: "src/App.tsx"
      provides: "Root app with Catppuccin background"
      contains: "ctp-base"
    - path: "src/components/Header.tsx"
      provides: "Header with backdrop blur"
      contains: "backdrop-blur"
  key_links:
    - from: "src/App.tsx"
      to: "Catppuccin colors"
      via: "className bg-ctp-base"
      pattern: "bg-ctp-base"
---

<objective>
Migrate core view components (App, Header, RepositoryView, StagingPanel, CommitHistory) from gray-* to Catppuccin colors.

Purpose: Extend the Catppuccin color system throughout the main application views for visual consistency.
Output: Core views using Catppuccin palette with backdrop blur header effect.
</objective>

<execution_context>
@/Users/phmatray/.claude/get-shit-done/workflows/execute-plan.md
@/Users/phmatray/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06.2-ux-ui-enhancements/06.2-RESEARCH.md
@.planning/phases/06.2-ux-ui-enhancements/06.2-02-SUMMARY.md
@src/App.tsx
@src/components/Header.tsx
@src/components/RepositoryView.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update App.tsx and Header.tsx</name>
  <files>src/App.tsx, src/components/Header.tsx</files>
  <action>
Update the root app and header with Catppuccin colors.

**App.tsx:**
```tsx
// Update the root div className:
<div className="flex flex-col h-screen bg-ctp-base text-ctp-text font-sans">
```

**Header.tsx:**
Apply Catppuccin colors and add backdrop blur effect:

```tsx
return (
  <header className="flex items-center justify-between h-14 px-4 border-b border-ctp-surface0 bg-ctp-mantle/80 backdrop-blur-md select-none sticky top-0 z-50">
    <div className="flex items-center gap-4">
      <h1 className="text-lg font-semibold text-ctp-text">FlowForge</h1>
      {status && (
        <>
          <span className="text-ctp-overlay0">/</span>
          <span className="text-sm text-ctp-subtext1">{status.repoName}</span>
        </>
      )}

      {status && (
        <div className="flex items-center gap-2 px-3 py-1 rounded-md bg-ctp-surface0">
          <GitBranch className="w-4 h-4 text-ctp-subtext0" />
          <span className="text-sm text-ctp-text font-medium font-mono">
            {status.branchName}
          </span>
          {status.isDirty && (
            <Circle
              className="w-2 h-2 fill-ctp-yellow text-ctp-yellow"
              aria-label="Uncommitted changes"
            />
          )}
        </div>
      )}
    </div>

    <div className="flex items-center gap-2">
      {/* ... buttons with updated text colors */}
      {/* Change text-gray-300 to text-ctp-subtext1 */}
      {/* Change hover:text-white to hover:text-ctp-text */}
    </div>
  </header>
);
```

Color mapping:
- bg-gray-900 -> bg-ctp-mantle/80 backdrop-blur-md
- border-gray-800 -> border-ctp-surface0
- text-white -> text-ctp-text
- text-gray-500 -> text-ctp-overlay0
- text-gray-300 -> text-ctp-subtext1
- text-gray-400 -> text-ctp-subtext0
- bg-gray-800 -> bg-ctp-surface0
- fill-yellow-500 -> fill-ctp-yellow
  </action>
  <verify>
1. Run `npm run tauri dev`
2. App background is Catppuccin base (#1e1e2e)
3. Header has subtle frosted glass effect
4. Branch badge uses Catppuccin surface color
5. Dirty indicator uses Catppuccin yellow
  </verify>
  <done>App and Header use Catppuccin colors with backdrop blur effect.</done>
</task>

<task type="auto">
  <name>Task 2: Update RepositoryView sidebar and tabs</name>
  <files>src/components/RepositoryView.tsx</files>
  <action>
Update RepositoryView with Catppuccin colors and smooth tab transitions using AnimatePresence.

**Add import at top of file:**
```tsx
import { motion, AnimatePresence } from "framer-motion";
```

**Wrap tab content with AnimatePresence for smooth transitions:**
```tsx
<AnimatePresence mode="wait">
  <motion.div
    key={activeTab}
    initial={{ opacity: 0, y: 10 }}
    animate={{ opacity: 1, y: 0 }}
    exit={{ opacity: 0, y: -10 }}
    transition={{ duration: 0.15 }}
    className="flex-1 overflow-hidden"
  >
    {activeTab === "changes" ? (
      <StagingPanel />
    ) : (
      <CommitHistory />
    )}
  </motion.div>
</AnimatePresence>
```

Color replacements:
- border-gray-800 -> border-ctp-surface0
- bg-gray-950 -> bg-ctp-base
- bg-gray-900 -> bg-ctp-mantle
- hover:bg-gray-800/50 -> hover:bg-ctp-surface0/50
- text-gray-400 -> text-ctp-subtext0
- text-gray-500 -> text-ctp-overlay0
- text-white -> text-ctp-text
- hover:text-gray-300 -> hover:text-ctp-subtext1
- border-blue-500 -> border-ctp-blue
- bg-gray-900/50 -> bg-ctp-mantle/50
- hover:bg-gray-700 -> hover:bg-ctp-surface1

Update the tab buttons:
```tsx
<button
  type="button"
  onClick={() => setActiveTab("changes")}
  className={cn(
    "flex-1 flex items-center justify-center gap-2 px-3 py-2.5 text-sm",
    "transition-colors border-b-2",
    activeTab === "changes"
      ? "text-ctp-text border-ctp-blue bg-ctp-mantle/50"
      : "text-ctp-subtext0 border-transparent hover:text-ctp-subtext1",
  )}
>
```

Update sidebar sections (details elements):
```tsx
<details open className="border-b border-ctp-surface0">
  <summary className="p-3 cursor-pointer hover:bg-ctp-surface0/50 flex items-center gap-2 select-none sticky top-0 bg-ctp-base z-10">
    <GitBranch className="w-4 h-4 text-ctp-subtext0" />
    <span className="font-semibold text-sm flex-1 text-ctp-text">Branches</span>
    <button
      type="button"
      onClick={(e) => { ... }}
      className="p-1 hover:bg-ctp-surface1 rounded text-ctp-subtext0 hover:text-ctp-text"
      title="Create new branch"
    >
      <Plus className="w-3.5 h-3.5" />
    </button>
  </summary>
  ...
</details>
```
  </action>
  <verify>
1. Run `npm run tauri dev`
2. Open a repository
3. Sidebar uses Catppuccin base background
4. Tab bar uses Catppuccin colors
5. Active tab has blue border
6. Hover states work correctly
7. All section headers styled consistently
8. Switch between Changes and History tabs - smooth fade transition occurs
  </verify>
  <done>RepositoryView uses Catppuccin colors throughout sidebar and tabs.</done>
</task>

<task type="auto">
  <name>Task 3: Update StagingPanel and CommitHistory</name>
  <files>src/components/staging/StagingPanel.tsx, src/components/commit/CommitHistory.tsx, src/index.css</files>
  <action>
Update remaining core components with Catppuccin colors.

**StagingPanel.tsx:**
Replace all gray-* with ctp-*:
- bg-gray-900 -> bg-ctp-mantle
- border-gray-800 -> border-ctp-surface0
- text-gray-400 -> text-ctp-subtext0
- text-gray-300 -> text-ctp-subtext1
- hover:bg-gray-800 -> hover:bg-ctp-surface0
- bg-gray-800 -> bg-ctp-surface0

**CommitHistory.tsx:**
Replace all gray-* with ctp-*:
- bg-gray-900 -> bg-ctp-mantle
- border-gray-800 -> border-ctp-surface0
- text-gray-400 -> text-ctp-subtext0
- text-gray-500 -> text-ctp-overlay0
- hover:bg-gray-800/50 -> hover:bg-ctp-surface0/50
- bg-gray-800/30 -> bg-ctp-surface0/30

**src/index.css:**
Update React Flow styles to use Catppuccin colors:
```css
/* React Flow Controls - Catppuccin Theme */
.react-flow__controls {
  background: var(--ctp-mantle, #181825);
  border: 1px solid var(--ctp-surface0, #313244);
  border-radius: 6px;
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
}

.react-flow__controls-button {
  background: var(--ctp-mantle, #181825);
  border-bottom: 1px solid var(--ctp-surface0, #313244);
  fill: var(--ctp-subtext0, #a6adc8);
  width: 28px;
  height: 28px;
}

.react-flow__controls-button:hover {
  background: var(--ctp-surface0, #313244);
  fill: var(--ctp-text, #cdd6f4);
}

.react-flow__controls-button:last-child {
  border-bottom: none;
}

/* React Flow Attribution - Catppuccin Theme */
.react-flow__attribution {
  background: var(--ctp-mantle, #181825);
  border: 1px solid var(--ctp-surface0, #313244);
  border-radius: 4px;
  padding: 2px 6px;
  font-size: 10px;
}

.react-flow__attribution a {
  color: var(--ctp-overlay0, #6c7086);
  text-decoration: none;
}

.react-flow__attribution a:hover {
  color: var(--ctp-subtext0, #a6adc8);
}
```
  </action>
  <verify>
1. Run `npm run tauri dev`
2. StagingPanel uses Catppuccin colors
3. CommitHistory uses Catppuccin colors
4. React Flow controls use Catppuccin colors
5. All hover states work correctly
6. No gray-* colors visible in these components
  </verify>
  <done>StagingPanel, CommitHistory, and React Flow styles migrated to Catppuccin.</done>
</task>

</tasks>

<verification>
1. `npm run tauri dev` - app launches with consistent Catppuccin colors
2. Header has backdrop blur effect
3. All sidebar sections use Catppuccin colors
4. Tab bar styled with Catppuccin
5. Staging panel and history list use Catppuccin
6. React Flow controls match the theme
7. Build succeeds: `npm run build`
</verification>

<success_criteria>
- App, Header, RepositoryView, StagingPanel, CommitHistory all use Catppuccin colors
- Header has frosted glass effect with backdrop-blur
- No gray-* colors in migrated components
- Consistent visual appearance across all core views
</success_criteria>

<output>
After completion, create `.planning/phases/06.2-ux-ui-enhancements/06.2-06-SUMMARY.md`
</output>
