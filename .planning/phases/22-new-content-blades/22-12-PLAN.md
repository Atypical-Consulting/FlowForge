---
phase: 22-new-content-blades
plan: 12
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/blades/DiffBlade.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Rendered markdown preview fills available width in DiffBlade"
    - "Monaco diff editor reappears at full size when toggling back from Preview to Diff"
  artifacts:
    - path: "src/components/blades/DiffBlade.tsx"
      provides: "DiffBlade with full-width preview and stable Monaco rendering"
      modified_lines: "265, 275"
  key_links:
    - from: "DiffBlade toggle"
      to: "Monaco DiffEditor container"
      via: "conditional render without remount issues"
      pattern: "h-full overflow-hidden"
---

<objective>
Fix DiffBlade markdown preview width constraint and Monaco diff editor 0px height issue

Purpose: Resolve UAT Test 13 (cosmetic) and Test 14 (major) — markdown preview should use full available width, and Monaco editor should render at full height when toggling back from Preview mode
Output: DiffBlade.tsx with updated container CSS classes
</objective>

<execution_context>
@/Users/phmatray/.claude/get-shit-done/workflows/execute-plan.md
@/Users/phmatray/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/debug/diffblade-monaco-0px-height.md
@src/components/blades/DiffBlade.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix markdown preview width and Monaco container height</name>
  <files>src/components/blades/DiffBlade.tsx</files>
  <action>
Fix two CSS issues identified in debug session:

**Issue 1 (line 265):** Markdown preview max-width constraint
- Remove `max-w-3xl` from the inner preview wrapper className
- Change from `className="p-6 max-w-3xl mx-auto"` to `className="p-6 mx-auto w-full"`
- This allows the preview to fill the available blade width instead of capping at 768px

**Issue 2 (line 275):** Monaco DiffEditor container missing explicit height
- Add `h-full overflow-hidden` to the Monaco container div className
- Change from `className="flex-1 min-h-0"` to `className="flex-1 min-h-0 h-full overflow-hidden"`
- This ensures Monaco's `height: 100%` resolves correctly during remount, preventing the 0px height issue

Root cause per debug session: Monaco editor measures container height during useEffect mount. Without explicit `h-full`, the flex-computed height may not be definitively resolved when Monaco initializes, causing it to measure 0px. The conditional ternary (showPreview toggle) causes full remount, triggering fresh measurement on each toggle-back.
  </action>
  <verify>
Stage a .md file with content, open its diff blade:
- Toggle to Preview mode → rendered markdown should span full blade width (not capped at 768px)
- Toggle back to Diff mode → Monaco diff editor should fill vertical space (not 0px height)
- Repeat toggle cycle 3-4 times → Monaco height remains stable
  </verify>
  <done>
Markdown preview uses full available width; Monaco diff editor renders at correct height on every toggle; no visual layout regressions
  </done>
</task>

</tasks>

<verification>
Manual test cycle: Stage .md file → open diff → toggle Preview (check width) → toggle Diff (check Monaco height) → repeat
</verification>

<success_criteria>
- UAT Test 13 passes: Markdown preview fills blade width
- UAT Test 14 passes: Monaco editor visible at full height after toggling back from Preview
- No regressions in diff blade layout or Monaco initialization
</success_criteria>

<output>
After completion, create `.planning/phases/22-new-content-blades/22-12-SUMMARY.md`
</output>
