---
phase: 13-navigation
plan: 05
type: execute
wave: 4
depends_on: ["13-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Top bar displays current repository name and current branch name"
    - "User can switch repositories from a dropdown in the top bar"
    - "User can switch branches from a dropdown with recent branches and search"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete navigation feature. Verify that all Phase 13 requirements (NAV-01 through NAV-05) are satisfied by visually testing the repo and branch switchers.

Purpose: Confirm the navigation feature works correctly end-to-end before marking Phase 13 complete.

Output: Verified navigation feature ready for use.
</objective>

<execution_context>
@/Users/phmatray/.claude/get-shit-done/workflows/execute-plan.md
@/Users/phmatray/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/13-navigation/13-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
  Complete navigation feature for Phase 13:
  - Repo switcher pill in header with slide-down dropdown (pinned + recent repos)
  - Branch switcher pill in header with slide-down dropdown (recent branches, search, remote toggle)
  - Repo switching with toast notification and last-branch restoration
  - Branch switching with stash-and-switch confirmation for dirty trees
  - Persistent pinned repos and recent branches across app restarts
  - Backend support for listing and checking out remote branches
  </what-built>
  <how-to-verify>
  Start the app with `cd /Users/phmatray/Repositories/github-phm/FlowForge && npm run tauri dev`.

  **NAV-01: Top bar displays current repository name**
  1. Open a repository
  2. Verify the header shows the repository name as a pill/block element on the left side
  3. The pill should show a folder icon and the repo folder name

  **NAV-02: Top bar displays current branch name**
  1. With a repository open, verify the branch name appears as a separate pill next to the repo pill
  2. It should show a git branch icon and the current branch name in monospace font
  3. If there are uncommitted changes, a yellow dot should appear

  **NAV-03: User can switch repositories from top bar dropdown**
  1. Click the repository pill -- a slide-down panel should appear
  2. The panel should show pinned repos at the top (if any) and recent repos below
  3. Click a different repo -- it should switch, show a toast, and close the panel
  4. Pin a repo using the pin icon -- verify it appears in the Pinned section
  5. Restart the app -- verify pinned repos persist

  **NAV-04: User can switch branches from top bar dropdown**
  1. Click the branch pill -- a slide-down panel should appear with search and branch list
  2. Select a different branch -- verify it switches and shows a toast
  3. Make some uncommitted changes, then try switching -- verify the stash-and-switch dialog appears
  4. Click "Stash and Switch" -- verify changes are stashed and branch switches
  5. Toggle "Show remote branches" -- verify remote branches appear with a badge

  **NAV-05: Branch dropdown shows recent branches with search**
  1. After switching a few branches, open the branch dropdown
  2. Verify "Recent" section shows the 3 most recently checked-out branches
  3. Type in the search field -- verify branches filter in real-time
  4. Search for something that doesn't exist -- verify "No branches match" message
  5. Press Escape -- verify the panel closes

  **Cross-cutting checks:**
  - Only one dropdown panel can be open at a time (click repo while branch is open)
  - Clicking outside any open panel closes it
  - Keyboard navigation works (Arrow keys + Enter + Escape)
  - Panels have smooth slide-down animation
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found during testing</resume-signal>
</task>

</tasks>

<verification>
All NAV-01 through NAV-05 requirements verified by human testing.
</verification>

<success_criteria>
- All 5 navigation requirements pass human verification
- No visual glitches, z-index issues, or animation jank
- Switching behavior works correctly including stash-and-switch
- Persistence works across app restarts
</success_criteria>

<output>
After completion, create `.planning/phases/13-navigation/13-05-SUMMARY.md`
</output>
