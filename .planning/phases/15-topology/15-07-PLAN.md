---
phase: 15-topology
plan: 07
type: execute
wave: 5
depends_on: ["15-06"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All 5 success criteria from the phase pass visual and functional verification"
    - "Blade navigation works smoothly with slide-in animations"
    - "Topology graph is visually Ungit-inspired with correct lane colors"
    - "Full drill-down chain works: topology -> commit -> diff"
    - "History view accessible and functional within topology process"
---

<objective>
Human verification checkpoint for Phase 15. Verify all requirements are met through functional and visual testing of the complete blade-based topology implementation.

Purpose: Phase 15 is the final phase of v1.1.0 and involves the largest architectural change (3-panel to blade layout). Visual and functional verification ensures the implementation meets the locked design decisions and all 10 requirements before shipping.

Output: Verification confirmation or list of issues to address.
</objective>

<execution_context>
@/Users/phmatray/.claude/get-shit-done/workflows/execute-plan.md
@/Users/phmatray/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 15 implementation:
- Blade-based layout replacing 3-panel tabs (Azure Portal pattern)
- Ungit-style topology graph with compact commit badges, straight angled edges, Gitflow semantic lane colors
- Commit details blade with full metadata and file tree (tree/flat toggle)
- Diff blade using Monaco DiffEditor for historical commits
- History view integrated into topology process
- Topology auto-refresh after commits
- Keyboard shortcuts (Escape to close blade, Enter to open commit details)
- Process navigation (Staging/Topology) in header bar
  </what-built>
  <how-to-verify>
Run `cd /Users/phmatray/Repositories/github-phm/FlowForge && cargo tauri dev` to start the development server.

**1. Layout Verification (Blade System)**
- Open a Git repository
- Verify left sidebar shows branches, stashes, tags (unchanged from before)
- Verify header shows "Staging" and "Topology" process buttons
- Click "Staging" -- verify staging panel with file list and diff viewer appears
- Click "Topology" -- verify topology graph appears
- Verify no more Changes/History/Topology tabs in the middle panel

**2. Topology Graph Verification (TOPO-05)**
- In Topology view, verify commit nodes are compact rounded-rectangle badges
- Verify badges show conventional commit type icon (if applicable) + message + short OID
- Verify edges are straight angled lines (not curved)
- Verify lane colors: main=blue, develop=green, feature branches=purple, release=orange, hotfix=red
- Verify branch labels appear in a header row above the graph
- Verify lane columns have faint background tint
- Verify scroll and zoom work (mouse wheel, pinch)

**3. Commit Details Verification (TOPO-01, TOPO-02, TOPO-03)**
- Click a commit node in the topology graph
- Verify a commit details blade slides in from the right
- Verify previous topology blade compresses to a narrow strip
- Verify details show: author, date, full SHA, commit message, parent SHAs
- Verify changed files list with status indicators (A/M/D)
- Verify per-file stats with colored bars (+/- counts)
- Toggle between tree and flat view for file list

**4. Diff Verification (TOPO-04, HIST-02, HIST-03)**
- In commit details, click a changed file
- Verify a diff blade slides in from the right
- Verify old vs new content displayed with syntax highlighting
- Verify unified diff is shown by default
- Click the toggle button to switch to side-by-side -- verify it works
- Click back arrow to return to commit details

**5. History View Verification (HIST-01)**
- In the Topology process, switch from Graph to History tab
- Verify commit list loads (same as old History tab)
- Click a commit in the history list
- Verify commit details blade opens with full details
- Click a file in the details to see the diff blade

**6. Auto-Refresh Verification (TOPO-06)**
- With topology graph visible, make a change to a file in the repository (edit and save)
- Stage and commit the change
- Verify the topology graph updates automatically without manual refresh

**7. Keyboard Shortcuts**
- With a blade open, press Escape -- verify the blade closes (pops back)
- Select a commit in topology, press Enter -- verify commit details open
- Navigate to topology root -- verify Escape doesn't close the root blade (nothing to pop)

**8. TOPO-07 Verification**
- In Topology process with graph as root blade -- verify the graph fills the full panel
- The graph itself is the content when no commit is selected (no empty "select a commit" state needed since the graph IS the default view)
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All 10 requirements verified through manual testing:
- TOPO-01: Click commit -> details blade opens
- TOPO-02: Details show author, date, SHA, message, parents
- TOPO-03: Changed files with status indicators
- TOPO-04: Click file -> diff blade opens
- TOPO-05: Ungit-style graph with lanes and badges
- TOPO-06: Auto-refresh after commits
- TOPO-07: Graph fills blade when no commit selected
- HIST-01: Select commit in history -> details
- HIST-02: View diff of files in historical commits
- HIST-03: Diff shows old vs new content
</verification>

<success_criteria>
- All 8 verification sections pass
- Blade animations are smooth (no jank or flash)
- Graph is visually clean with proper lane colors
- Full drill-down chain works reliably
- No regressions in existing functionality (sidebar, staging, settings)
</success_criteria>

<output>
After completion, create `.planning/phases/15-topology/15-07-SUMMARY.md`
</output>
